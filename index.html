<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Startup Tool Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; 
            padding: 1rem;
            box-sizing: border-box;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem 0.5rem 0 0;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            font-weight: 600;
        }
        .tab-button.active {
            background-color: #ffffff;
            color: #4c51bf; 
            border-bottom: 2px solid #4c51bf;
        }
        .tab-button:not(.active):hover {
            background-color: #e2e8f0;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="selection:bg-blue-200">
    <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-4xl border border-gray-200 animate-fade-in">
        <h1 class="text-4xl font-extrabold text-gray-900 mb-6 text-center">
            <i class="fas fa-tools text-blue-500 mr-2"></i>AI Startup Tool Suite
        </h1>
        <p class="text-gray-600 mb-8 text-center text-lg">
            Validate your startup idea and auto-generate FAQs with AI assistance!
        </p>
        <div class="flex border-b border-gray-200 mb-6">
            <button id="validatorTab" class="tab-button active flex-1 text-center bg-gray-100 text-gray-700" data-tab="validator">
                <i class="fas fa-rocket mr-2"></i>Startup Validator
            </button>
            <button id="faqTab" class="tab-button flex-1 text-center bg-gray-100 text-gray-700" data-tab="faq-builder">
                <i class="fas fa-question-circle mr-2"></i>FAQ Builder
            </button>
        </div>
        <div id="validatorContent" class="tab-content active">
            <h2 class="text-3xl font-extrabold text-gray-900 mb-4 text-center">
                <i class="fas fa-chart-line text-green-500 mr-2"></i> Validate Your Idea
            </h2>
            <form id="startupForm" class="space-y-6">
                <div>
                    <label for="validatorStartupName" class="block text-lg font-medium text-gray-700 mb-2">Startup Name</label>
                    <input type="text" id="validatorStartupName" name="startupName" placeholder="e.g., EcoCycle" required
                           class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base transition duration-300 ease-in-out transform hover:scale-[1.005]">
                </div>
                <div>
                    <label for="validatorDescription" class="block text-lg font-medium text-gray-700 mb-2">Description</label>
                    <textarea id="validatorDescription" name="description" rows="4" placeholder="Briefly describe your startup idea and what it does..." required
                              class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-y transition duration-300 ease-in-out transform hover:scale-[1.005]"></textarea>
                </div>
                <div>
                    <label for="validatorTargetMarket" class="block text-lg font-medium text-gray-700 mb-2">Target Market</label>
                    <input type="text" id="validatorTargetMarket" name="targetMarket" placeholder="e.g., Small businesses, Gen Z, Rural communities" required
                           class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base transition duration-300 ease-in-out transform hover:scale-[1.005]">
                </div>
                <div>
                    <label for="validatorBusinessModel" class="block text-lg font-medium text-gray-700 mb-2">Business Model</label>
                    <input type="text" id="validatorBusinessModel" name="businessModel" placeholder="e.g., Subscription, Freemium, E-commerce, Ad-supported" required
                           class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base transition duration-300 ease-in-out transform hover:scale-[1.005]">
                </div>
                <div>
                    <label for="validatorCompetitiveAdvantage" class="block text-lg font-medium text-gray-700 mb-2">Competitive Advantage</label>
                    <textarea id="validatorCompetitiveAdvantage" name="competitiveAdvantage" rows="3" placeholder="What makes your startup unique or better than competitors?" required
                              class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-y transition duration-300 ease-in-out transform hover:scale-[1.005]"></textarea>
                </div>

                <button type="submit" id="validateButton"
                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-semibold text-white bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300 ease-in-out transform hover:scale-105 active:scale-95">
                    <i class="fas fa-lightbulb mr-2"></i> Validate My Idea
                </button>
            </form>

            <div id="validatorLoadingIndicator" class="mt-8 text-center text-blue-600 text-xl font-medium hidden">
                <i class="fas fa-spinner fa-spin mr-2"></i> Analyzing your idea...
            </div>

            <div id="validatorResponseContainer" class="mt-8 pt-8 border-t border-gray-200 hidden">
                <h2 class="text-3xl font-extrabold text-gray-900 mb-4 text-center">
                    <i class="fas fa-chart-line text-green-500 mr-2"></i> AI Insights
                </h2>
                <div id="validatorAIResponse" class="bg-blue-50 p-6 rounded-xl shadow-inner border border-blue-200 text-gray-800 leading-relaxed text-lg overflow-auto max-h-96">
                </div>
            </div>
        </div>
        <div id="faqBuilderContent" class="tab-content">
            <h2 class="text-3xl font-extrabold text-gray-900 mb-4 text-center">
                <i class="fas fa-question-circle text-purple-500 mr-2"></i> Build Your FAQs
            </h2>
            <form id="faqForm" class="space-y-6">
                <div>
                    <label for="faqStartupName" class="block text-lg font-medium text-gray-700 mb-2">Startup Name</label>
                    <input type="text" id="faqStartupName" name="startupName" placeholder="e.g., GreenCycle Solutions" required
                           class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 text-base transition duration-300 ease-in-out transform hover:scale-[1.005]">
                </div>
                <div>
                    <label for="faqStartupDescription" class="block text-lg font-medium text-gray-700 mb-2">Startup Description</label>
                    <textarea id="faqStartupDescription" name="startupDescription" rows="6" placeholder="Describe what your startup does, its core product/service, and who it's for." required
                              class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 text-base resize-y transition duration-300 ease-in-out transform hover:scale-[1.005]"></textarea>
                </div>

                <button type="submit" id="generateFAQButton"
                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-semibold text-white bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition duration-300 ease-in-out transform hover:scale-105 active:scale-95">
                    <i class="fas fa-magic mr-2"></i> Generate FAQs
                </button>
            </form>

            <div id="faqLoadingIndicator" class="mt-8 text-center text-purple-600 text-xl font-medium hidden">
                <i class="fas fa-spinner fa-spin mr-2"></i> Generating FAQs...
            </div>

            <div id="faqResponseContainer" class="mt-8 pt-8 border-t border-gray-200 hidden">
                <h2 class="text-3xl font-extrabold text-gray-900 mb-4 text-center">
                    <i class="fas fa-book-open text-green-500 mr-2"></i> Your FAQs
                </h2>
                <div id="faqContent" class="bg-purple-50 p-6 rounded-xl shadow-inner border border-purple-200 text-gray-800 leading-relaxed text-lg overflow-auto max-h-[80vh]">
                </div>
            </div>
        </div>
        <div id="customModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4">
                <h3 id="modalTitle" class="text-xl font-bold text-gray-800 mb-3"></h3>
                <p id="modalMessage" class="text-gray-700 mb-5"></p>
                <button id="modalCloseButton" class="w-full py-2 px-4 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition duration-200">OK</button>
            </div>
        </div>
    </div>

    <script type="module">
        const validatorTab = document.getElementById('validatorTab');
        const faqTab = document.getElementById('faqTab');
        const validatorContent = document.getElementById('validatorContent');
        const faqBuilderContent = document.getElementById('faqBuilderContent');
        const startupForm = document.getElementById('startupForm');
        const validatorLoadingIndicator = document.getElementById('validatorLoadingIndicator');
        const validatorResponseContainer = document.getElementById('validatorResponseContainer');
        const validatorAIResponse = document.getElementById('validatorAIResponse');
        const validatorStartupNameInput = document.getElementById('validatorStartupName');
        const validatorDescriptionInput = document.getElementById('validatorDescription');
        const validatorTargetMarketInput = document.getElementById('validatorTargetMarket');
        const validatorBusinessModelInput = document.getElementById('validatorBusinessModel');
        const validatorCompetitiveAdvantageInput = document.getElementById('validatorCompetitiveAdvantage');
        const faqForm = document.getElementById('faqForm');
        const faqLoadingIndicator = document.getElementById('faqLoadingIndicator');
        const faqResponseContainer = document.getElementById('faqResponseContainer');
        const faqContentDiv = document.getElementById('faqContent');
        const faqStartupNameInput = document.getElementById('faqStartupName');
        const faqStartupDescriptionInput = document.getElementById('faqStartupDescription');
        const customModal = document.getElementById('customModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const modalCloseButton = document.getElementById('modalCloseButton');
        const BACKEND_BASE_URL = 'http://127.0.0.1:5000'; 
        function showTab(tabName) {
            validatorTab.classList.remove('active');
            faqTab.classList.remove('active');
            validatorContent.classList.remove('active');
            faqBuilderContent.classList.remove('active');
            if (tabName === 'validator') {
                validatorTab.classList.add('active');
                validatorContent.classList.add('active');
            } else if (tabName === 'faq-builder') {
                faqTab.classList.add('active');
                faqBuilderContent.classList.add('active');
            }
        }
        validatorTab.addEventListener('click', () => showTab('validator'));
        faqTab.addEventListener('click', () => showTab('faq-builder'));
        function showCustomModal(title, message) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            customModal.classList.remove('hidden');
        }

        modalCloseButton.addEventListener('click', () => {
            customModal.classList.add('hidden');
        });
        function formatMarkdown(markdownText, type) {
            let html = markdownText
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') 
                .replace(/\*(.*?)\*/g, '<em>$1</em>'); 

            if (type === 'validator') {
                const lines = html.split('\n\n').map(p => {
                    if (p.startsWith('* ')) { 
                        return `<ul>${p.split('\n').map(li => `<li>${li.substring(2).trim()}</li>`).join('')}</ul>`;
                    }
                    return `<p>${p}</p>`;
                }).join('');
                return lines;
            } else if (type === 'faq') {
                // Specific formatting for FAQ Q&A
                const lines = html.split('\n').filter(line => line.trim() !== '');
                let formattedContent = [];
                lines.forEach(line => {
                    if (line.startsWith('**Q:')) {
                        formattedContent.push(`<h3 class="text-xl font-semibold text-gray-900 mt-4 mb-2">${line.replace('**Q:', '<span class="text-purple-600">Q:</span>')}</h3>`);
                    } else if (line.startsWith('A:')) {
                        formattedContent.push(`<p class="text-gray-700 mb-3">${line.replace('A:', '<span class="text-green-600">A:</span>')}</p>`);
                    } else {
                        formattedContent.push(`<p class="text-gray-700 mb-3">${line}</p>`);
                    }
                });
                return formattedContent.join('');
            }
            return html; 
        }
        startupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            validatorLoadingIndicator.classList.remove('hidden');
            validatorResponseContainer.classList.add('hidden');
            validatorAIResponse.innerHTML = '';

            const formData = {
                startupName: validatorStartupNameInput.value,
                description: validatorDescriptionInput.value,
                targetMarket: validatorTargetMarketInput.value,
                businessModel: validatorBusinessModelInput.value,
                competitiveAdvantage: validatorCompetitiveAdvantageInput.value,
            };

            try {
                const response = await fetch(`${BACKEND_BASE_URL}/validate_startup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData),
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Server responded with status ${response.status}: ${errorData.error || 'Unknown error'}`);
                }

                const result = await response.json();
                if (result.success && result.ai_response) {
                    validatorAIResponse.innerHTML = formatMarkdown(result.ai_response, 'validator');
                    validatorResponseContainer.classList.remove('hidden');
                } else {
                    showCustomModal("Validation Failed", result.error || "No valid response from AI. Please try again.");
                }
            } catch (error) {
                console.error("Error validating startup idea:", error);
                showCustomModal("Error", `Failed to validate idea: ${error.message}. Please ensure the Python backend is running.`);
            } finally {
                validatorLoadingIndicator.classList.add('hidden');
            }
        });
        faqForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            faqLoadingIndicator.classList.remove('hidden');
            faqResponseContainer.classList.add('hidden');
            faqContentDiv.innerHTML = '';

            const formData = {
                startupName: faqStartupNameInput.value,
                startupDescription: faqStartupDescriptionInput.value,
            };

            try {
                const response = await fetch(`${BACKEND_BASE_URL}/generate_faq`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData),
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Server responded with status ${response.status}: ${errorData.error || 'Unknown error'}`);
                }

                const result = await response.json();
                if (result.success && result.faq_content) {
                    faqContentDiv.innerHTML = formatMarkdown(result.faq_content, 'faq');
                    faqResponseContainer.classList.remove('hidden');
                } else {
                    showCustomModal("FAQ Generation Failed", result.error || "No valid FAQ content from AI. Please try again.");
                }
            } catch (error) {
                console.error("Error generating FAQs:", error);
                showCustomModal("Error", `Failed to generate FAQs: ${error.message}. Please ensure the Python backend is running.`);
            } finally {
                faqLoadingIndicator.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
